<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Assignment 3 - Random Web Image App Deluxe (version 2) | MAD9132</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Android App Development">
    
    <link rel="preload" href="/F2020/assets/css/0.styles.efac8754.css" as="style"><link rel="preload" href="/F2020/assets/js/app.1cc07ef2.js" as="script"><link rel="preload" href="/F2020/assets/js/2.4b4802b7.js" as="script"><link rel="preload" href="/F2020/assets/js/21.74cfd594.js" as="script"><link rel="prefetch" href="/F2020/assets/js/10.5106b495.js"><link rel="prefetch" href="/F2020/assets/js/11.6f05a404.js"><link rel="prefetch" href="/F2020/assets/js/12.4564ec2f.js"><link rel="prefetch" href="/F2020/assets/js/13.e666d981.js"><link rel="prefetch" href="/F2020/assets/js/14.f5622a69.js"><link rel="prefetch" href="/F2020/assets/js/15.e53f18da.js"><link rel="prefetch" href="/F2020/assets/js/16.145d8225.js"><link rel="prefetch" href="/F2020/assets/js/17.8962a051.js"><link rel="prefetch" href="/F2020/assets/js/18.49a4760c.js"><link rel="prefetch" href="/F2020/assets/js/19.b7a11f77.js"><link rel="prefetch" href="/F2020/assets/js/20.3d53d97a.js"><link rel="prefetch" href="/F2020/assets/js/22.c3a0ae4e.js"><link rel="prefetch" href="/F2020/assets/js/23.32772f69.js"><link rel="prefetch" href="/F2020/assets/js/24.8e7aa4b2.js"><link rel="prefetch" href="/F2020/assets/js/25.dec5c2d1.js"><link rel="prefetch" href="/F2020/assets/js/26.4ca24876.js"><link rel="prefetch" href="/F2020/assets/js/27.f8166d21.js"><link rel="prefetch" href="/F2020/assets/js/28.2e8ae410.js"><link rel="prefetch" href="/F2020/assets/js/29.c2905fd2.js"><link rel="prefetch" href="/F2020/assets/js/3.deb6ef4a.js"><link rel="prefetch" href="/F2020/assets/js/30.877f77ec.js"><link rel="prefetch" href="/F2020/assets/js/31.aca02277.js"><link rel="prefetch" href="/F2020/assets/js/32.df1c7dc6.js"><link rel="prefetch" href="/F2020/assets/js/33.e856014d.js"><link rel="prefetch" href="/F2020/assets/js/34.da644fc1.js"><link rel="prefetch" href="/F2020/assets/js/35.7a9a2b43.js"><link rel="prefetch" href="/F2020/assets/js/36.2066eacf.js"><link rel="prefetch" href="/F2020/assets/js/37.5f798923.js"><link rel="prefetch" href="/F2020/assets/js/38.9c77dfe5.js"><link rel="prefetch" href="/F2020/assets/js/39.eea97326.js"><link rel="prefetch" href="/F2020/assets/js/4.91154e50.js"><link rel="prefetch" href="/F2020/assets/js/40.73f7c5f0.js"><link rel="prefetch" href="/F2020/assets/js/41.635620bb.js"><link rel="prefetch" href="/F2020/assets/js/42.1e48655e.js"><link rel="prefetch" href="/F2020/assets/js/43.2607158f.js"><link rel="prefetch" href="/F2020/assets/js/44.3436507c.js"><link rel="prefetch" href="/F2020/assets/js/45.d69e3cc8.js"><link rel="prefetch" href="/F2020/assets/js/46.1bc68b3a.js"><link rel="prefetch" href="/F2020/assets/js/47.074c4315.js"><link rel="prefetch" href="/F2020/assets/js/48.6494ab96.js"><link rel="prefetch" href="/F2020/assets/js/49.25a8c66a.js"><link rel="prefetch" href="/F2020/assets/js/5.30a09b8e.js"><link rel="prefetch" href="/F2020/assets/js/50.a4d63146.js"><link rel="prefetch" href="/F2020/assets/js/51.40b83261.js"><link rel="prefetch" href="/F2020/assets/js/52.3ea8a189.js"><link rel="prefetch" href="/F2020/assets/js/6.256ed5d0.js"><link rel="prefetch" href="/F2020/assets/js/7.abbed4fb.js"><link rel="prefetch" href="/F2020/assets/js/8.941e2461.js"><link rel="prefetch" href="/F2020/assets/js/9.20225582.js">
    <link rel="stylesheet" href="/F2020/assets/css/0.styles.efac8754.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/F2020/" class="home-link router-link-active"><!----> <span class="site-name">MAD9132</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/F2020/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2020/assignments/" class="nav-link router-link-active">
  Deliverables
</a></div><div class="nav-item"><a href="/F2020/resources/" class="nav-link">
  Resources
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/F2020/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/F2020/assignments/" class="nav-link router-link-active">
  Deliverables
</a></div><div class="nav-item"><a href="/F2020/resources/" class="nav-link">
  Resources
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Content Modules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/F2020/modules/install/" class="sidebar-link">Install Dev Tools</a></li><li><a href="/F2020/modules/submit/" class="sidebar-link">How to Submit Assignments</a></li><li><a href="/F2020/modules/template/" class="sidebar-link">Code Template</a></li><li><a href="/F2020/modules/kotlin-intro/" class="sidebar-link">Kotlin Introduction</a></li><li><a href="/F2020/modules/kotlin-oop/" class="sidebar-link">Kotlin OOP</a></li><li><a href="/F2020/modules/android/" class="sidebar-link">Android</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deliverables</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="assignment-3-random-web-image-app-deluxe-version-2"><a href="#assignment-3-random-web-image-app-deluxe-version-2" class="header-anchor">#</a> Assignment 3 - Random Web Image App Deluxe (version 2)</h1> <p>In this assignment you will add a series of new features to the Random Web Image Android App you created during the last assignment.</p> <p>New App/Code Features:</p> <ul><li>ProgressBar Control</li> <li>Listener for image downloads</li> <li>An Internet Connectivity class with App termination</li> <li>A global Application Class used to get Context</li> <li>Toast messages</li> <li>Extension function for Toast output</li> <li>Saving data to Shared Preferences</li> <li>Full screen support</li> <li>Gestures</li> <li>Double Tap support</li> <li>At least 10 more image URL's of which at least 3 provide a random image</li></ul> <p>The App will be built/modified during class and students will complete required components as instructed.</p> <p>Add 10 new URLs as described below:</p> <p>You need to find a minimum of 10 more image URL's that will be added to the stored list in your current Android assignment.</p> <p>You must find, test and then save URLs for use in your App.</p> <p><strong>NOTE</strong>: ALL URL's must use HTTPS (secure addresses)</p> <p>At least 3 of the URLs must access Placeholder image generator sights that provide actual photos, for example unsplash.com.</p> <p>At least 3 of the URLs must provide a random image (not the same image every time)</p> <p>All your existing and new URL's that support image dimensions in the URL should have a width and height added, for example:</p> <p><a href="https://picsum.photos/800/600" target="_blank" rel="noopener noreferrer">https://picsum.photos/800/600<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The rest of the images can be URLs to photos from the web that you would like to use in your app.</p> <p><strong>NOTE</strong>: ALL of your image URL's must use HTTPS addresses and ALL (at least 20) of them must work when your App is running on Android.</p> <p>Add and implement gesture and double tap listener support:</p> <p>You must add and implement both the <code>GestureDetector</code> <code>onGestureListener</code> and <code>onDoubleTapListener</code> interfaces to your <code>MainActivity</code> class.</p> <p>All the abstract methods from these interfaces must be implemented and all but the <code>onShowPress</code> and <code>onLongPress</code> should return true.</p> <p><strong>Note</strong>: onShowPress and onLongPress return Unit</p> <p>Create a <code>nullable GestureDetectorCompat</code> instance property in the <code>MainActivity class</code> and initialize it to <code>null</code>.</p> <p>In the <code>MainActivity class onCreate</code> method initialize the <code>GestureDetectorCompat</code> instance property passing this for both the context and the listener parameters.</p> <p>Then pass this to the <code>GestureDetectorCompat</code> instance property's <code>setOnDoubleTapListener</code> method.</p> <p>You must now override the <code>onTouchEvent</code> method in the <code>MainActivity</code> class and set the <code>GestureDetectorCompat</code> instance to handle the <code>onTouchEvent</code> and then pass the event to the superclass implementation of <code>onTouchEvent</code></p> <p>Test your gesture code by outputting each event using <code>Toast.makeText</code> method using the <code>LENGTH_SHORT</code> duration option.</p> <p>Once you know your gesture code is working correctly remove all the <code>Toast.makeText</code> method calls from your gesture methods.</p> <p>Then remove the getImage button from the UI and remove the getImage button <code>setOnClickListener</code> method from the <code>onCreate</code> method in the <code>MainActivity</code> class.</p> <p>Then add the call to <code>glideImage.loadGlideImage</code> to the <code>onFling</code> method override in the <code>MainActivity</code> class.</p> <p>Test and verify that images are now loaded by using a <code>Fling</code> gesture.</p> <p>Add an extension method to the Context class to both your <code>MainActivity</code> and <code>GlideImage</code> classes :</p> <p>This method should have a single <code>String</code> parameter named <code>message</code>. This <code>String</code> will be used as <code>message</code> parameter for a <code>Toast.makeText</code> method using the <code>LENGTH_SHORT</code> duration option.</p> <p>The method should be used like this:</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code>context<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">&quot;message text&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Add an <code>Application subclass</code> called <code>TheApp</code>:</p> <p>This class will inherit from the <code>Application</code> class.</p> <p>It will contain an unnamed companion object that will contain a single property:</p> <p>A <code>var</code> of the type <code>Context</code> called <code>context</code> which will use <code>lateinit</code> and have an empty <code>private set method</code> to make this property read only.</p> <p>The class will override the <code>onCreate</code> method. This method should first call the superclass implementation of onCreate and the initialize the context property which was declared in the companion object to the applicationContext.</p> <p>In order to use this class globally in your application you need to open the <code>AndroidManifest.xml</code> file for your project and add a name attribute that contains the fully qualified name of this class to the application tag:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>&lt;application
android:name=&quot;your.project.package.name.goes.here.TheApp&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="add-shared-preferences"><a href="#add-shared-preferences" class="header-anchor">#</a> Add Shared Preferences:</h2> <p>Create a new <code>Kotlin</code> class in your project called <code>SharedPreferences</code>.</p> <p>Add the provided code to this class:</p> <p><a href="~@root/SharedPreferences.txt">Shared Preferences Sample Class</a></p> <p>Add all the required Set and Get methods to this class:</p> <p>add <code>get</code> methods for <code>Int?</code>, <code>Long?</code>, <code>Float?</code>, <code>Boolean?</code> and <code>Set&lt;String&gt;?</code>
add <code>set</code> methods for <code>Int</code>, <code>Long</code>, <code>Float</code>, <code>Boolean</code> and <code>Set&lt;String&gt;</code>
Add a new property to the <code>GlideImage</code> class called <code>sharedPreferences</code> and initialize it to a instance of your completed <code>SharedPreferences</code> class.</p> <p>Inside the <code>onResourceReady</code> fun in your <code>GlideImage</code> class after <code>lastURL</code> has been set to last URL used save <code>lastURL</code> to shared preferences using your <code>sharedPreferences</code> object.</p> <p><strong>Note</strong>: Your key name should be &quot;LAST_URL&quot;</p> <p>In the <code>MainActivity</code> class <code>onCreate</code> method create an instance of your completed <code>SharedPreferences</code> class called <code>sharedPreferences</code>.</p> <p>Create a new <code>nullable String</code> local variable called <code>lastURL</code>.</p> <p>Initialize this var using your <code>sharedPreferences</code> object's <code>getValueString</code> method passing <code>LAST_URL</code> as the key.</p> <p><strong>Note</strong>: Your <code>nullable String</code> variable (lastURL) will now contain either <code>null</code> or the address of the last URL used in your app.</p> <h2 id="add-full-screen-support"><a href="#add-full-screen-support" class="header-anchor">#</a> Add Full Screen support:</h2> <p>Add the provided <code>showSystemUI</code> and <code>hideSystemUI</code> methods to the <code>MainActivity</code> class:</p> <p><a href="~@root/FullScreenSampleCode.txt">Full Screen Sample Code</a></p> <p>Use the Double Tap event listener to toggle between full and regular screen mode.</p> <p>Note: The user of your app may switch out of full screen mode without using a double tap (swipe down).</p> <p>To deal with this issue you should add a listener for in the onCreate method in the MainActivity class and detect the current state:</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code>window<span class="token punctuation">.</span>decorView<span class="token punctuation">.</span><span class="token function">setOnSystemUiVisibilityChangeListener</span> <span class="token punctuation">{</span> visibility <span class="token operator">-&gt;</span>
  <span class="token comment">// set a systemUIVisibilty state property here</span>
  <span class="token comment">// normal view is (visibility and View.SYSTEM_UI_FLAG_FULLSCREEN == 0)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="convert-to-use-lateinit"><a href="#convert-to-use-lateinit" class="header-anchor">#</a> Convert to use lateinit:</h3> <p>Convert the nullable GestureDetectorCompat instance property in the <code>MainActivity</code> class to use lateinit (no longer a nullable type) then remove both unnecessary safe calls (?) used with the this property.</p> <h3 id="code-comments-and-regions"><a href="#code-comments-and-regions" class="header-anchor">#</a> Code comments and regions:</h3> <p>Add your full name and the date at the top of the <code>MainActivity</code> and all other Kotlin source code files you have added to the project.</p> <p>Add separate code regions in the <code>MainActivity</code> and all other Kotlin source code files you have added to the project for Properties and methods. Also add code regions for large areas of code such as the gestures code in MainActivity.</p> <p><strong>Note</strong>: A demo of the completed App will be shown in class</p> <h2 id="submission"><a href="#submission" class="header-anchor">#</a> Submission</h2> <p>Submit your assignment as a complete project (containing all source code and support files) that is packaged as zip file that is created in Android Studio using the <code>Export to Zip File</code> menu item under the File menu options.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>NOTE</strong>: Make sure you add your first and last name to your submitted zip file:</p> <p>example: Pat_Student_AndroidAssignment.zip</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/2/2020, 4:45:33 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/F2020/assets/js/app.1cc07ef2.js" defer></script><script src="/F2020/assets/js/2.4b4802b7.js" defer></script><script src="/F2020/assets/js/21.74cfd594.js" defer></script>
  </body>
</html>
